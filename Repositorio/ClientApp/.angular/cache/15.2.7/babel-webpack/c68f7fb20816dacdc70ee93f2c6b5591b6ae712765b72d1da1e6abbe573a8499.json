{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'http://localhost:5098/api/login';\n    // Inicializa el rol desde localStorage si existe\n    const storedRol = localStorage.getItem('rol');\n    this.rolSubject = new BehaviorSubject(storedRol);\n    this.rol$ = this.rolSubject.asObservable();\n  }\n  iniciarSesion(correo, password) {\n    return this.http.post(this.apiUrl, {\n      Correo: correo,\n      Password: password\n    });\n  }\n  guardarRol(rol) {\n    localStorage.setItem('rol', rol);\n    this.rolSubject.next(rol); // Actualiza el estado del rol\n  }\n\n  obtenerRol() {\n    return this.rolSubject.value; // Devuelve el valor actual del rol\n  }\n\n  cerrarSesion() {\n    localStorage.removeItem('rol');\n    this.rolSubject.next(null); // Resetea el estado del rol\n  }\n}\n\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,eAAe,QAAoB,MAAM;;;AAKlD,OAAM,MAAOC,WAAW;EAKtBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAJhB,WAAM,GAAG,iCAAiC;IAKhD;IACA,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IAC7C,IAAI,CAACC,UAAU,GAAG,IAAIP,eAAe,CAAgBI,SAAS,CAAC;IAC/D,IAAI,CAACI,IAAI,GAAG,IAAI,CAACD,UAAU,CAACE,YAAY,EAAE;EAC5C;EAEAC,aAAa,CAACC,MAAc,EAAEC,QAAgB;IAC5C,OAAO,IAAI,CAACT,IAAI,CAACU,IAAI,CAAM,IAAI,CAACC,MAAM,EAAE;MAAEC,MAAM,EAAEJ,MAAM;MAAEK,QAAQ,EAAEJ;IAAQ,CAAE,CAAC;EACjF;EAEAK,UAAU,CAACC,GAAW;IACpBb,YAAY,CAACc,OAAO,CAAC,KAAK,EAAED,GAAG,CAAC;IAChC,IAAI,CAACX,UAAU,CAACa,IAAI,CAACF,GAAG,CAAC,CAAC,CAAC;EAC7B;;EAEAG,UAAU;IACR,OAAO,IAAI,CAACd,UAAU,CAACe,KAAK,CAAC,CAAC;EAChC;;EAEAC,YAAY;IACVlB,YAAY,CAACmB,UAAU,CAAC,KAAK,CAAC;IAC9B,IAAI,CAACjB,UAAU,CAACa,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAC9B;;;AA5BWnB,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAAwB,SAAXxB,WAAW;EAAAyB,YAFV;AAAM","names":["BehaviorSubject","AuthService","constructor","http","storedRol","localStorage","getItem","rolSubject","rol$","asObservable","iniciarSesion","correo","password","post","apiUrl","Correo","Password","guardarRol","rol","setItem","next","obtenerRol","value","cerrarSesion","removeItem","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\USER\\Documents\\Progra2\\Proyecto-Final-DSW\\Repositorio\\ClientApp\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  private apiUrl = 'http://localhost:5098/api/login';\r\n  private rolSubject: BehaviorSubject<string | null>; // BehaviorSubject para el rol\r\n  public rol$: Observable<string | null>; // Observable que los componentes pueden suscribirse\r\n\r\n  constructor(private http: HttpClient) {\r\n    // Inicializa el rol desde localStorage si existe\r\n    const storedRol = localStorage.getItem('rol');\r\n    this.rolSubject = new BehaviorSubject<string | null>(storedRol);\r\n    this.rol$ = this.rolSubject.asObservable();\r\n  }\r\n\r\n  iniciarSesion(correo: string, password: string): Observable<any> {\r\n    return this.http.post<any>(this.apiUrl, { Correo: correo, Password: password });\r\n  }\r\n\r\n  guardarRol(rol: string): void {\r\n    localStorage.setItem('rol', rol);\r\n    this.rolSubject.next(rol); // Actualiza el estado del rol\r\n  }\r\n\r\n  obtenerRol(): string | null {\r\n    return this.rolSubject.value; // Devuelve el valor actual del rol\r\n  }\r\n\r\n  cerrarSesion(): void {\r\n    localStorage.removeItem('rol');\r\n    this.rolSubject.next(null); // Resetea el estado del rol\r\n  }\r\n}\r\n\r\n\r\n/*\r\nexport class AuthService {\r\n  iniciarSesion(correo: string, password: string): Observable<any> {\r\n    return this.http.post<any>(this.apiUrl, { Correo: correo, Password: password });\r\n}\r\n  private apiUrl = 'http://localhost:5098/api/login'; // Endpoint del backend\r\n  private rol: string | null = null;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  login(correo: string, password: string): Observable<any> {\r\n    return this.http.post(this.apiUrl, { correo, password });\r\n  }\r\n\r\n  setRol(rol: string) {\r\n    this.rol = rol;\r\n    localStorage.setItem('rol', rol); // Opcional: guardar en localStorage\r\n  }\r\n\r\n  getRol(): string | null {\r\n    return this.rol || localStorage.getItem('rol');\r\n  }\r\n\r\n  logout() {\r\n    this.rol = null;\r\n    localStorage.removeItem('rol');\r\n  }\r\n}\r\n*/"]},"metadata":{},"sourceType":"module","externalDependencies":[]}